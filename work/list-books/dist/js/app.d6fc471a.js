(function(t){function e(e){for(var n,s,a=e[0],u=e[1],c=e[2],h=0,p=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,a=1;a<o.length;a++){var u=o[a];0!==r[u]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=u;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"360b":function(t,e,o){"use strict";o("8bd6")},"41f2":function(t,e,o){"use strict";o("9706")},"4c34":function(t,e,o){},51352:function(t,e,o){"use strict";o("5309")},5309:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("router-view")],1)},i=[],s={},a=s,u=o("2877"),c=Object(u["a"])(a,r,i,!1,null,null,null),l=c.exports,h=(o("4de4"),o("7db0"),o("c740"),o("4160"),o("a630"),o("caad"),o("c975"),o("fb6a"),o("a434"),o("b64b"),o("d3b7"),o("6062"),o("2532"),o("3ca3"),o("159b"),o("ddb0"),o("5530")),p=o("2909"),f=o("2f62");n["a"].use(f["a"]);var d=new f["a"].Store({state:{books:b(),filter:{genre:"Все",author:"",title:"",sort:"нет"}},getters:{books:function(t){var e=t.books.slice();return""!=t.filter.title&&(e=e.filter((function(e){return e.title.toLowerCase().includes(t.filter.title.toLowerCase())}))),""!=t.filter.author&&(e=e.filter((function(e){return e.author.toLowerCase().includes(t.filter.author.toLowerCase())}))),"Все"!=t.filter.genre&&(e=e.filter((function(e){return-1!=e.genres.indexOf(t.filter.genre)}))),"автор"==t.filter.sort&&e.sort((function(t,e){return t.author>e.author?1:-1})),"название"==t.filter.sort&&e.sort((function(t,e){return t.title>e.title?1:-1})),e},bookIndex:function(t,e){return function(t){return e.books.findIndex((function(e){return e.id==t}))}},book:function(t){return function(e){return t.books.find((function(t){return t.id==e}))}},genres:function(t){var e=[];return t.books.forEach((function(t){e.push.apply(e,Object(p["a"])(t["genres"]))})),Array.from(new Set(e))},amountBooks:function(t,e){return e.books.length},amountAuthor:function(t,e){var o=new Set;return e.books.forEach((function(t){o.add(t["author"])})),o.size}},mutations:{setFilter:function(t,e){t.filter=Object(h["a"])({},e)},delBook:function(t,e){t.books.forEach((function(t,o,n){t["id"]==e&&n.splice(o,1)}))},changeBook:function(t,e){t.books.forEach((function(t){t["id"]==e["id"]&&(t.title=e.title,t.author=e.author,t.genres=Object(p["a"])(e.genres))}))}},actions:{setFilter:function(t,e){Object.keys(e).length&&t.commit("setFilter",e)},delBook:function(t,e){t.commit("delBook",e)},changeBook:function(t,e){console.log(1),t.commit("changeBook",e)}}});function b(){return[{id:1,title:"Детское море",author:"Николай Варухин",genres:["Наука","Педагогика и воспитания","Спорт"]},{id:2,title:"Владычица Озера",author:"Анджей Сапковский",genres:["Фэнтези"]},{id:3,title:"Ловец человеков",author:"Надежда Попова",genres:["Детектив","Научная фантастика","Тёмное фэнтези"]},{id:4,title:"Болтливый мертвец",author:"Макс Фрай",genres:["Фэнтези"]},{id:5,title:"Меч Предназначения",author:"Анджей Сапковский",genres:["Героический","Фэнтези"]},{id:6,title:"Герцог де Л'Омлет",author:"Эдгар Алан По",genres:["Классические детективы","Проза"]},{id:7,title:"На байдарке",author:"Феликс Квадригин",genres:["Спорт"]},{id:8,title:"Тубурская игра",author:"Макс Фрай",genres:["Детектив","Фэнтези"]},{id:9,title:"Маяк",author:"Эдгар Алан По",genres:["Классические детективы","Проза"]},{id:10,title:"Последнее желание",author:"Анджей Сапковский",genres:["Героический","Фэнтези"]}]}var v=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"library"},[o("Search"),t.books.length?o("ul",{staticClass:"list-group"},t._l(t.books,(function(t,e){return o("BookLi",{key:e,staticClass:"list-group-item",attrs:{book:t}})})),1):o("div",{staticClass:"alert alert-warning"},[t._v(" Таких книг нет ")]),o("p",[o("span",[t._v(" Всего книг: "+t._s(t.amountBooks)+" ")]),o("span",[t._v(" Всего авторов: "+t._s(t.amountAuthor)+" ")])])],1)},g=[],k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("form",{on:{submit:function(e){return e.preventDefault(),t.pushUrl(e)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-6 col-md-4"},[o("p",[t._v("Название")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),o("div",{staticClass:"col-12 col-sm-6 col-md-4"},[o("p",[t._v("Автор")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),o("div",{staticClass:"col-12 col-sm-12 col-md-4"},[o("p",[t._v("Жанр")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.genre,expression:"genre"}],staticClass:"form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.genre=e.target.multiple?o:o[0]}}},[o("option",[t._v("Все")]),t._l(t.genres,(function(e,n){return o("option",{key:n},[t._v(" "+t._s(e)+" ")])}))],2)])]),o("div",{staticClass:"row justify-content-between"},[o("div",{staticClass:"col-8 col-sm-4 text-left"},[o("span",[t._v("Сортировка: ")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],staticClass:"form-control d-inline w-auto",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sort=e.target.multiple?o:o[0]}}},[o("option",[t._v("нет")]),o("option",[t._v("автор")]),o("option",[t._v("название")])])]),t._m(0)])])])},_=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-4 col-sm text-right"},[o("button",{staticClass:"btn btn-primary"},[t._v("найти")])])}],y={data:function(){return{title:"",author:"",genre:"Все",sort:"нет"}},computed:Object(h["a"])({},Object(f["c"])({genres:"genres"})),methods:{pushUrl:function(){this.$router.push({path:"/library",query:{genre:this.genre,author:this.author,title:this.title,sort:this.sort}})}},watch:{sort:function(){this.pushUrl()}}},w=y,C=(o("8795"),Object(u["a"])(w,k,_,!1,null,"622ef96b",null)),O=C.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",{staticClass:"book"},[o("p",{staticClass:"d-inline",on:{click:t.openBook}},[o("span",[o("big",[t._v('"'+t._s(t.book.title)+'"; ')]),o("b",[t._v(" Автор: "+t._s(t.book.author)+"; ")]),t._v(" Жанр: "),o("i",[t._v(" "+t._s(t.book.genres)+". ")])],1)]),o("button",{staticClass:"btn btn-danger btn-sm float-right",on:{click:function(e){return e.preventDefault(),t.del(t.book.id)}}},[t._v(" удалить ")])])},B=[],x={props:["book"],methods:Object(h["a"])(Object(h["a"])({},Object(f["b"])({del:"delBook"})),{},{openBook:function(){this.$router.push({path:"".concat(this.book.id),query:this.$route.query})}})},$=x,F=(o("51352"),Object(u["a"])($,j,B,!1,null,"19373bc6",null)),q=F.exports,E={components:{Search:O,BookLi:q},computed:Object(h["a"])({},Object(f["c"])({books:"books",amountBooks:"amountBooks",amountAuthor:"amountAuthor"})),methods:Object(h["a"])(Object(h["a"])({},Object(f["b"])({setFilter:"setFilter"})),{},{updFilter:function(){this.setFilter(this.$route.query)}}),mounted:function(){this.updFilter()},watch:{$route:function(){this.updFilter()}}},S=E,P=(o("360b"),Object(u["a"])(S,m,g,!1,null,"7b006afa",null)),A=P.exports,N=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-12 col-sm-7 m-auto p-3"},[o("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.exit}},[t._v("назад")]),o("button",{staticClass:"btn btn-danger btn-sm float-right",on:{click:function(e){return e.preventDefault(),t.openCreate(e)}}},[t._v(" редактировать ")]),o("div",[o("h1",[t._v(t._s(t.book.title))]),o("div",{staticClass:"list-group"},[o("p",{staticClass:"list-group-item"},[o("b",[t._v("Автор:")]),t._v(" "+t._s(t.book.author))]),o("p",{staticClass:"list-group-item"},[o("b",[t._v("Жанр:")]),o("i",[t._v(" "+t._s(t.book.genres)+" ")])])]),o("div",{staticClass:"btn-group w-100",attrs:{role:"group"}},[o("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(e){return t.pushUrl("last")}}},[t._v("предыдущая")]),o("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.pushUrl("next")}}},[t._v("следующая")])])])])},L=[],U={computed:Object(h["a"])(Object(h["a"])({},Object(f["c"])({bookIndex:"bookIndex",getbook:"book",books:"books"})),{},{id:function(){return this.$route.params.id},index:function(){return this.bookIndex(this.id)},book:function(){return this.getbook(this.id)}}),methods:Object(h["a"])(Object(h["a"])({},Object(f["b"])({setFilter:"setFilter"})),{},{updFilter:function(){this.book?this.setFilter(this.$route.query):this.$router.push({name:"E404"})},pushUrl:function(t){"next"==t?this.index<this.books.length-1&&this.$router.push({path:"".concat(this.getbook(this.books[this.index+1].id).id),query:this.$route.query}):this.index>0&&this.$router.push({path:"".concat(this.getbook(this.books[this.index-1].id).id),query:this.$route.query})},exit:function(){this.$router.push({name:"library",query:this.$route.query})},openCreate:function(){this.$router.push({path:"/change/".concat(this.book.id),query:this.$route.query})}}),mounted:function(){this.updFilter()},watch:{$route:function(){this.updFilter()}}},I=U,D=Object(u["a"])(I,N,L,!1,null,null,null),G=D.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"alert alert-secondary m-5"},[o("h2",[t._v("ОШИБКА: 404")]),o("h1",[t._v("Страница не найдена")]),o("router-link",{attrs:{to:{name:"library"}}},[t._v("Вернуться на главную")])],1)},T=[],J={},z=J,H=Object(u["a"])(z,M,T,!1,null,null,null),K=H.exports,Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-12 col-sm-7 m-auto"},[o("form",{on:{submit:function(e){return e.preventDefault(),t.change(e)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("p",[t._v("Название:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.title,expression:"newBook.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newBook.title},on:{input:function(e){e.target.composing||t.$set(t.newBook,"title",e.target.value)}}})]),o("div",{staticClass:"col-12"},[o("p",[t._v("Автор:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.author,expression:"newBook.author"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newBook.author},on:{input:function(e){e.target.composing||t.$set(t.newBook,"author",e.target.value)}}})]),o("div",{staticClass:"col-12"},[o("p",[t._v("Жанры:")]),t._l(t.newBook.genres,(function(e,n){return o("p",{key:n},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.genres[n],expression:"newBook.genres[i]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newBook.genres[n]},on:{input:function(e){e.target.composing||t.$set(t.newBook.genres,n,e.target.value)}}}),o("span",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.delGenre(n)}}},[t._v("удалить")])])}))],2)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("span",{staticClass:"btn btn-primary",on:{click:t.addGenre}},[t._v("+")])])]),o("hr"),o("button",{staticClass:"btn btn-success",attrs:{disabled:!t.validForm}},[t._v("Сохранить")])])])},R=[],V=o("b85c"),W={data:function(){return{newBook:{}}},created:function(){this.copyBook()},computed:Object(h["a"])(Object(h["a"])({},Object(f["c"])({getbook:"book"})),{},{book:function(){return this.getbook(this.$route.params.id)},validForm:function(){var t=!0;/[\S]+/.test(this.newBook.title)||(t=!1),/[\S]+/.test(this.newBook.author)||(t=!1);var e,o=Object(V["a"])(this.newBook.genres);try{for(o.s();!(e=o.n()).done;){var n=e.value;/[\S]+/.test(n)||(t=!1)}}catch(r){o.e(r)}finally{o.f()}return t}}),watch:{book:function(){this.copyBook()}},methods:Object(h["a"])(Object(h["a"])({},Object(f["b"])({changeBook:"changeBook"})),{},{copyBook:function(){this.book?this.newBook=Object(h["a"])({},this.book):this.$router.push({name:"E404"})},addGenre:function(){this.newBook.genres.push("")},delGenre:function(t){this.newBook.genres.length>1&&this.newBook.genres.splice(t,1)},change:function(){this.changeBook(this.newBook),this.$router.push({path:"/".concat(this.$route.params.id),query:this.$route.query})}})},X=W,Y=(o("41f2"),Object(u["a"])(X,Q,R,!1,null,"1cd9b838",null)),Z=Y.exports;n["a"].use(v["a"]);var tt=[{path:"",redirect:{name:"library"}},{path:"/library",name:"library",component:A},{path:"/:id",component:G},{path:"/change/:id",component:Z},{path:"*",name:"E404",component:K}],et=new v["a"]({routes:tt});n["a"].config.productionTip=!1,new n["a"]({store:d,router:et,render:function(t){return t(l)}}).$mount("#app")},8795:function(t,e,o){"use strict";o("4c34")},"8bd6":function(t,e,o){},9706:function(t,e,o){}});
//# sourceMappingURL=app.d6fc471a.js.map